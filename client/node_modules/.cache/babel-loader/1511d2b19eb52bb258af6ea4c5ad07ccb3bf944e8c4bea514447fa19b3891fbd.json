{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/pedro/OneDrive/Documentos/Social Media/Social-Media-App/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/pedro/OneDrive/Documentos/Social Media/Social-Media-App/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{PersonAddOutlined,PersonRemoveOutlined}from\"@mui/icons-material\";import{Box,IconButton,Typography,useTheme}from\"@mui/material\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{setFriends}from\"state\";import FlexBetween from\"./FlexBetween\";import UserImage from\"./UserImage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Friend=function Friend(_ref){var friendId=_ref.friendId,name=_ref.name,subtitle=_ref.subtitle,userPicturePath=_ref.userPicturePath;var dispatch=useDispatch();var navigate=useNavigate();var _useSelector=useSelector(function(state){return state.user;}),_id=_useSelector._id;var token=useSelector(function(state){return state.token;});var friends=useSelector(function(state){return state.user.friends;});var _useTheme=useTheme(),palette=_useTheme.palette;var primaryLight=palette.primary.light;var primaryDark=palette.primary.dark;var main=palette.neutral.main;var medium=palette.neutral.medium;var isFriend=friends.length?friends.find(function(friend){return friend._id===friendId;}):false;var patchFriend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:3001/users/\".concat(_id,\"/\").concat(friendId),{method:\"PATCH\",headers:{Authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;dispatch(setFriends({friends:data}));case 7:case\"end\":return _context.stop();}},_callee);}));return function patchFriend(){return _ref2.apply(this,arguments);};}();// Renderizar o botão apenas se friendId for diferente de _id\nvar renderFriendButton=function renderFriendButton(){if(friendId!==_id){return/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return patchFriend();},sx:{backgroundColor:primaryLight,p:\"0.6rem\"},children:isFriend?/*#__PURE__*/_jsx(PersonRemoveOutlined,{sx:{color:primaryDark}}):/*#__PURE__*/_jsx(PersonAddOutlined,{sx:{color:primaryDark}})});}return null;};return/*#__PURE__*/_jsxs(FlexBetween,{children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"1rem\",children:[/*#__PURE__*/_jsx(UserImage,{image:userPicturePath,size:\"55px\"}),/*#__PURE__*/_jsxs(Box,{onClick:function onClick(){navigate(\"/profile/\".concat(friendId));navigate(0);},children:[/*#__PURE__*/_jsx(Typography,{color:main,variant:\"h5\",fontWeight:\"500\",sx:{\"&:hover\":{color:palette.primary.light,cursor:\"pointer\"}},children:name}),/*#__PURE__*/_jsx(Typography,{color:medium,fontSize:\"0.75rem\",children:subtitle})]})]}),renderFriendButton()]});};export default Friend;","map":{"version":3,"names":["React","PersonAddOutlined","PersonRemoveOutlined","Box","IconButton","Typography","useTheme","useDispatch","useSelector","useNavigate","setFriends","FlexBetween","UserImage","jsx","_jsx","jsxs","_jsxs","Friend","_ref","friendId","name","subtitle","userPicturePath","dispatch","navigate","_useSelector","state","user","_id","token","friends","_useTheme","palette","primaryLight","primary","light","primaryDark","dark","main","neutral","medium","isFriend","length","find","friend","patchFriend","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","concat","method","headers","Authorization","sent","json","stop","apply","arguments","renderFriendButton","onClick","sx","backgroundColor","p","children","color","gap","image","size","variant","fontWeight","cursor","fontSize"],"sources":["C:/Users/pedro/OneDrive/Documentos/Social Media/Social-Media-App/client/src/components/Friend.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { PersonAddOutlined, PersonRemoveOutlined } from \"@mui/icons-material\";\r\nimport { Box, IconButton, Typography, useTheme } from \"@mui/material\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { setFriends } from \"state\";\r\nimport FlexBetween from \"./FlexBetween\";\r\nimport UserImage from \"./UserImage\";\r\n\r\nconst Friend = ({ friendId, name, subtitle, userPicturePath }) => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { _id } = useSelector((state) => state.user);\r\n  const token = useSelector((state) => state.token);\r\n  const friends = useSelector((state) => state.user.friends);\r\n\r\n  const { palette } = useTheme();\r\n  const primaryLight = palette.primary.light;\r\n  const primaryDark = palette.primary.dark;\r\n  const main = palette.neutral.main;\r\n  const medium = palette.neutral.medium;\r\n\r\n  const isFriend = friends.length\r\n    ? friends.find((friend) => friend._id === friendId)\r\n    : false;\r\n\r\n  const patchFriend = async () => {\r\n    const response = await fetch(\r\n      `http://localhost:3001/users/${_id}/${friendId}`,\r\n      {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    dispatch(setFriends({ friends: data }));\r\n  };\r\n\r\n  // Renderizar o botão apenas se friendId for diferente de _id\r\n  const renderFriendButton = () => {\r\n    if (friendId !== _id) {\r\n      return (\r\n        <IconButton\r\n          onClick={() => patchFriend()}\r\n          sx={{ backgroundColor: primaryLight, p: \"0.6rem\" }}\r\n        >\r\n          {isFriend ? (\r\n            <PersonRemoveOutlined sx={{ color: primaryDark }} />\r\n          ) : (\r\n            <PersonAddOutlined sx={{ color: primaryDark }} />\r\n          )}\r\n        </IconButton>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <FlexBetween>\r\n      <FlexBetween gap=\"1rem\">\r\n        <UserImage image={userPicturePath} size=\"55px\" />\r\n        <Box\r\n          onClick={() => {\r\n            navigate(`/profile/${friendId}`);\r\n            navigate(0);\r\n          }}\r\n        >\r\n          <Typography\r\n            color={main}\r\n            variant=\"h5\"\r\n            fontWeight=\"500\"\r\n            sx={{\r\n              \"&:hover\": {\r\n                color: palette.primary.light,\r\n                cursor: \"pointer\",\r\n              },\r\n            }}\r\n          >\r\n            {name}\r\n          </Typography>\r\n          <Typography color={medium} fontSize=\"0.75rem\">\r\n            {subtitle}\r\n          </Typography>\r\n        </Box>\r\n      </FlexBetween>\r\n      {renderFriendButton()}\r\n    </FlexBetween>\r\n  );\r\n};\r\n\r\nexport default Friend;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}